#!/usr/bin/env bash

NAMESPACE='com.evernote.Evernote'
KEY='ENSubstituteServerName'
VALUE='sandbox.evernote.com'

enable_sandbox() {
  echo "Enable sandbox"
  defaults write $NAMESPACE $KEY $VALUE 2> /dev/null
}

disable_sandbox() {
  echo "Disable sandbox"
  defaults delete $NAMESPACE $KEY 2> /dev/null
}

case "$1" in
  off)
    disable_sandbox
    ;;

  on)
    enable_sandbox
    ;;

  *)  # toggle
    if defaults read $NAMESPACE $KEY > /dev/null 2>&1; then
      disable_sandbox
    else
      enable_sandbox
    fi
esac

killall Evernote 2>/dev/null
