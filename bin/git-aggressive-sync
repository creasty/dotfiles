#!/usr/bin/env bash

source "$(dirname $0)/../lib/helpers.sh"

section 'add'
git add -A -v `git rev-parse --show-toplevel` || true

section 'commit'
if [ $# -gt 0 ]; then
  git commit -m "$1"
else
  git commit
fi

if [ $? -eq 0 ]; then
  section 'pull'
  git auto-ref pull || true

  section 'push'
  git auto-ref push
fi
